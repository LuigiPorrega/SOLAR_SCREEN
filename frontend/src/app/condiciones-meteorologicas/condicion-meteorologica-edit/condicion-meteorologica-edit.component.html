<div class="container mt-4 glass-card animate-fade-in p-4 rounded-4 shadow-sm" style="max-width: 500px;">
  <h4 class="text-center mb-3 text-gradient">{{ isEditMode ? 'Editar Condición' : 'Nueva Condición' }}</h4>

  <form [formGroup]="form" (ngSubmit)="guardar()">
    <div class="mb-2">
      <label class="form-label small">Fecha</label>
      <input formControlName="Fecha" type="date" class="form-control form-control-sm" />
    </div>
    <div class="mb-2">
      <label class="form-label small">Luz Solar (lux)</label>
      <input formControlName="LuzSolar" type="number" class="form-control form-control-sm" />
    </div>
    <div class="mb-2">
      <label class="form-label small">Temperatura (°C)</label>
      <input formControlName="Temperatura" type="number" class="form-control form-control-sm" />
    </div>
    <div class="mb-2">
      <label class="form-label small">Humedad (%)</label>
      <input formControlName="Humedad" type="number" class="form-control form-control-sm" />
    </div>
    <div class="mb-3">
      <label class="form-label small">Viento (km/h)</label>
      <input formControlName="Viento" type="number" class="form-control form-control-sm" />
    </div>

    <!-- Botón de crear solo si tiene permisos -->
    <button *ngIf="puedeCrear()" type="submit" class="btn btn-sm btn-success w-100 mb-2">
      <fa-icon [icon]="isEditMode ? faSave : faPlus" class="me-2"></fa-icon>
      {{ isEditMode ? 'Actualizar' : 'Crear' }}
    </button>

    <!-- Alerta si no tiene permisos -->
    <div *ngIf="!puedeCrear()" class="alert alert-warning d-flex justify-content-between align-items-center py-2 px-3">
      <small>
        <strong>Atención:</strong> Debes iniciar sesión para {{ isEditMode ? 'actualizar' : 'crear' }} una condición.
      </small>
      <button class="btn btn-sm btn-outline-primary ms-2" [routerLink]="['/login']">Iniciar sesión</button>
    </div>

    <!-- Cancelar visible siempre -->
    <button class="btn btn-outline-secondary btn-sm mt-2 w-100" [routerLink]="['/condiciones']">Cancelar</button>
  </form>
</div>
